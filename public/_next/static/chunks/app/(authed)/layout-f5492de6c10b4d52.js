(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5152],{93281:function(e,t,n){Promise.resolve().then(n.t.bind(n,45142,23)),Promise.resolve().then(n.bind(n,29851)),Promise.resolve().then(n.bind(n,5061)),Promise.resolve().then(n.bind(n,11508)),Promise.resolve().then(n.bind(n,19707)),Promise.resolve().then(n.bind(n,79330)),Promise.resolve().then(n.bind(n,91399)),Promise.resolve().then(n.t.bind(n,25579,23)),Promise.resolve().then(n.t.bind(n,73818,23)),Promise.resolve().then(n.bind(n,5208)),Promise.resolve().then(n.t.bind(n,64517,23))},29851:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthContext:function(){return d},AuthProvider:function(){return f},useAuth:function(){return h}});var r=n(43786),l=n(34870),s=n(15410),a=n(43016),i=n(33786),o=n(89246),u=n(35758),c=n(16310);let d=(0,l.createContext)(null);function f(e){let{children:t,isPrivate:n}=e,[f,h]=(0,l.useState)(),[x,v]=(0,l.useState)(),[b,m]=(0,l.useState)(),[p,w]=(0,l.useState)(!1),[j,g]=(0,l.useState)(null),[N]=(0,u.Fe)();(0,l.useEffect)(()=>{x&&(0,a.Aj)(x,e=>{if(!e&&n){window.location.assign("/");return}N({variables:{id:(null==e?void 0:e.uid)||""}}),g(e)})},[x]);let P=async e=>{if(!(null==x?void 0:x.currentUser))return j;await (0,a.ck)(null==x?void 0:x.currentUser,e);let t={...j,...e};return g(t),t};return(0,r.jsxs)(d.Provider,{value:{firebaseApp:f,firebaseAuth:x,isAuthLoaded:p,currentUser:j,updateProfile:P,firebaseStorage:b},children:[(0,r.jsx)(o.default,{src:"https://www.gstatic.com/firebasejs/8.0/firebase.js",async:!0,onLoad:()=>{let e=(0,s.ZF)({apiKey:"AIzaSyBwc3v-zlfXuiAG5HyM4cJ_tRwW5WAGxzA",authDomain:"launderette.firebaseapp.com"}),t=(0,a.v0)(e);t.tenantId="".concat("users-tenant-qk2a6");let n=(0,i.cF)(e,c.env.NEXT_PUBLIC_STORAGE_DEFAULT_BUCKET);h(e),m(n),v(t),w(!0)}}),t]})}let h=()=>{if(!d||!l.useContext)throw Error("useAuth should be used inside an AuthProvider");return(0,l.useContext)(d)}},37757:function(e,t,n){"use strict";n.d(t,{aC:function(){return r.useAuth}});var r=n(29851);n(34870)},5061:function(e,t,n){"use strict";n.d(t,{DashboardProvider:function(){return g}});var r=n(43786),l=n(34870),s=n(70320),a=n.n(s),i=n(27432),o=n(35070),u=n(52526),c=n(79230),d=n(37757),f=n(44798);function h(){let{firebaseAuth:e}=(0,d.aC)();return(0,r.jsxs)("button",{onClick:()=>{null==e||e.signOut()},className:"w-full flex items-center gap-2 cursor-pointer",children:[(0,r.jsx)(f.l,{className:"text-brand-blue"}),(0,r.jsx)("span",{className:"text-sm text-neutral-600",children:"Sign Out"})]})}var x=n(78742),v=n(81410),b=n(23831);let m=[{icon:x.V,label:"Home",href:"/dashboard",pathMatcher:/^\/dashboard$/},{icon:v.h,label:"Subscriptions",href:"/dashboard/subscriptions",pathMatcher:/^\/dashboard\/subscriptions$/},{icon:b.L,label:"Profile",href:"/dashboard/profile",pathMatcher:/^\/dashboard\/profile$/}];var p=n(35283);function w(e){let{data:t}=e,n=(0,p.usePathname)(),s=t.pathMatcher.test(n),i=l.createElement(t.icon,{className:s?"text-brand-beige text-lg":"text-brand-blue text-lg"});return(0,r.jsxs)(c.default,{href:t.href,className:a()("w-full flex items-center gap-3 tracking-wide py-1 p-2 hover:bg-neutral-500/10 rounded-full",{"!bg-brand-blue":s}),children:[i,(0,r.jsx)("span",{className:a()({"text-neutral-600":!s,"text-white":s}),children:t.label})]})}function j(){var e;let{currentUser:t}=(0,d.aC)(),n=(null==t?void 0:null===(e=t.displayName)||void 0===e?void 0:e.split(" ").map(e=>e.slice(0,1).toUpperCase()).join(""))||"";return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col bg-brand-beige",children:[(0,r.jsx)("div",{className:"w-full p-6",children:(0,r.jsx)(c.default,{href:"/",children:(0,r.jsx)(u.default,{alt:"Launderette NYC Logo",className:"w-40",height:234,src:"/logo.webp",width:930})})}),(0,r.jsx)("div",{className:"w-full pt-6 px-4 flex-1 flex flex-col gap-4",children:m.map(e=>(0,r.jsx)(w,{data:e,isCollapsed:!1},e.href))}),(0,r.jsxs)("div",{className:"w-full p-4 border-t border-t-black/10 flex flex-col gap-4",children:[(0,r.jsxs)(c.default,{href:"/dashboard",className:"text-sm text-white font-bold flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full relative overflow-hidden flex items-center justify-center text-sm font-light bg-brand-dark-blue",children:(null==t?void 0:t.photoURL)?(0,r.jsx)("img",{src:t.photoURL,className:"w-full h-full absolute top-0 left-0 object-cover"}):n}),(0,r.jsx)("div",{className:"text-brand-blue",children:null==t?void 0:t.displayName})]}),(0,r.jsx)(h,{})]})]})}function g(e){let{children:t}=e,[n,s]=(0,l.useState)(!1);return(0,r.jsxs)("main",{className:"w-full h-full absolute top-0 left-0 bg-neutral-100 flex overflow-hidden",children:[(0,r.jsx)("div",{className:"md:hidden",children:(0,r.jsx)("div",{className:"w-9 h-9 bg-brand-blue text-white rounded-full text-xl top-2 right-2 shadow-sm flex items-center justify-center fixed z-40 cursor-pointer",onClick:()=>s(!0),children:n?(0,r.jsx)(i.X,{}):(0,r.jsx)(o.a,{})})}),(0,r.jsx)("div",{className:a()("w-[240px] h-full flex flex-col md:relative fixed z-50 md:z-auto transition-all",{"-translate-x-full md:translate-x-0":!n,"translate-x-0":n}),children:(0,r.jsx)(j,{})}),n&&(0,r.jsx)("div",{className:"w-full h-full bg-black/20 md:hidden cursor-pointer z-40 fixed top-0 left-0",onClick:()=>s(!1)}),(0,r.jsx)("div",{className:"flex-1 h-full flex flex-col overflow-hidden overflow-y-auto",children:t})]})}},11508:function(e,t,n){"use strict";n.d(t,{ApolloAppProvider:function(){return v}});var r=n(43786),l=n(34870),s=n(15410),a=n(43016),i=n(12420),o=n(32156),u=n(23204),c=n(50757),d=n(90552);let f=(0,s.ZF)({apiKey:"AIzaSyBwc3v-zlfXuiAG5HyM4cJ_tRwW5WAGxzA",authDomain:"launderette.firebaseapp.com"}),h=()=>new Promise(e=>{let t=(0,a.v0)(f);t.tenantId="".concat("users-tenant-qk2a6");let n=t.onAuthStateChanged(t=>{n(),e(t)})}),x=async()=>{await h();let e=(0,i.L)({uri:"https://api.launderettenyc.com/graphql"}),t=(0,d.v)(async(e,t)=>{var n;let{headers:r}=t,l=(0,a.v0)(f);l.tenantId="".concat("users-tenant-qk2a6");let s=await (null===(n=l.currentUser)||void 0===n?void 0:n.getIdToken());return{headers:{...r,authorization:s?"Bearer ".concat(s):""}}});return new o.f({link:t.concat(e),cache:new u.h})};function v(e){let{children:t}=e,[n,s]=(0,l.useState)();return((0,l.useEffect)(()=>{(async()=>{s(await x())})()},[]),n)?(0,r.jsx)(c.e,{client:n,children:t}):null}},19707:function(e,t,n){"use strict";n.d(t,{LayoutProvider:function(){return a}});var r=n(43786);n(34870);var l=n(80525),s=n(58649);function a(e){let{children:t}=e;return(0,r.jsx)(s.n,{children:(0,r.jsx)(l.ZP,{theme:{token:{colorPrimary:"#235892"}},children:t})})}},79330:function(e,t,n){"use strict";n.d(t,{OrderProvider:function(){return o},Y:function(){return u}});var r=n(43786),l=n(34870),s=n(35758);let a={services:[s.px.WashFold],preferences:{detergent:s.m5.Lavender,fabricSoftener:s.FV.No,oxiClean:s.FV.No,stainRemoval:s.FV.No,colorSplit:s.FV.No},size:s.YL.Small},i=(0,l.createContext)({});function o(e){let[t,n]=(0,l.useState)(a),[s,o]=(0,l.useState)(null),[u,c]=(0,l.useState)(),d=e=>{n(t=>({...t,...e}))};return(0,r.jsx)(i.Provider,{value:{orderDetails:t,setServices:e=>{d({services:e})},reset:()=>{n(a),o(null)},setPreferences:e=>{d({preferences:e})},setSize:e=>{d({size:e})},draftOrder:s,setDraftOrder:o,paymentIntentClientSecret:u,setPaymentIntentClientSecret:c},children:e.children})}let u=()=>(0,l.useContext)(i)},91399:function(e,t,n){"use strict";n.d(t,{SitePreferencesProvider:function(){return i},i:function(){return o}});var r=n(43786),l=n(34870),s=n(35758);let a=(0,l.createContext)({}),i=e=>{let{children:t}=e,{data:{data:n=[]}={},loading:l}=(0,s.xd)();return(0,r.jsx)(a.Provider,{value:{preferences:n,isLoading:l,getPreference:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=n.find(t=>t.preferenceKey===e);return(null==r?void 0:r.preferenceValue)||t}},children:t})},o=()=>(0,l.useContext)(a)},45142:function(){},64517:function(){}},function(e){e.O(0,[753,403,9813,6828,5394,9958,8884,9246,5208,5525,770,9945,525,9157,9028,7601,8874,2615,1744],function(){return e(e.s=93281)}),_N_E=e.O()}]);